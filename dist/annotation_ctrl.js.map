{"version":3,"sources":["../src/annotation_ctrl.js"],"names":["_","PiWebApiAnnotationsQueryCtrl","$scope","databases","templates","getDatabases","console","log","getEventFrames","ctrl","datasource","afserver","webid","then","dbs","annotation","database","getEventFrameTemplates","WebId","templateUrl"],"mappings":";;;;;;;;;;;;;;;AAAOA,O;;;;;;;;;;;;;;;;;;;;;8CAEMC,4B;AACX,8CAAaC,MAAb,EAAqB;AAAA;;AACnB,eAAKA,MAAL,GAAcA,MAAd;AACA;AACA,eAAKC,SAAL,GAAiB,EAAjB;AACA,eAAKC,SAAL,GAAiB,EAAjB;AACA,eAAKC,YAAL;AACD;;;;4CACkB;AACjBC,oBAAQC,GAAR,CAAY,sBAAZ;AACD;;;4CAEkB;AACjB,iBAAKC,cAAL;AACD;;;yCACe;AACd,gBAAIC,OAAO,IAAX;AACAA,iBAAKC,UAAL,CAAgBL,YAAhB,CAA6B,KAAKK,UAAL,CAAgBC,QAAhB,CAAyBC,KAAtD,EAA6DC,IAA7D,CAAkE,eAAO;AACvEJ,mBAAKN,SAAL,GAAiBW,GAAjB;AACA,kBAAIL,KAAKM,UAAL,CAAgBC,QAApB,EAA8BP,KAAKD,cAAL;AAC/B,aAHD;AAID;;;2CACiB;AAChBF,oBAAQC,GAAR,CAAY,qBAAZ;AACAD,oBAAQC,GAAR,CAAY,IAAZ;AACA,gBAAIE,OAAO,IAAX;AACAA,iBAAKC,UAAL,CAAgBO,sBAAhB,CAAuCR,KAAKM,UAAL,CAAgBC,QAAhB,CAAyBE,KAAhE,EAAuEL,IAAvE,CAA4E,qBAAa;AACvFJ,mBAAKL,SAAL,GAAiBA,SAAjB;AACD,aAFD;AAGD;;;;;;;;AAGHH,mCAA6BkB,WAA7B,GAA2C,kCAA3C","file":"annotation_ctrl.js","sourceRoot":"gridprotectionalliance-osisoftpi-datasource","sourcesContent":["import _ from 'lodash'\r\n\r\nexport class PiWebApiAnnotationsQueryCtrl {\r\n  constructor ($scope) {\r\n    this.$scope = $scope\r\n    //this.annotation.query = (this.annotation.query || {})\r\n    this.databases = []\r\n    this.templates = []\r\n    this.getDatabases()\r\n  }\r\n  templateChanged () {\r\n    console.log('Yay! templateChanged')\r\n  }\r\n\r\n  databaseChanged () {\r\n    this.getEventFrames()\r\n  }\r\n  getDatabases () {\r\n    var ctrl = this\r\n    ctrl.datasource.getDatabases(this.datasource.afserver.webid).then(dbs => {\r\n      ctrl.databases = dbs\r\n      if (ctrl.annotation.database) ctrl.getEventFrames()\r\n    })\r\n  }\r\n  getEventFrames () {\r\n    console.log('Yay! getEventFrames')\r\n    console.log(this)\r\n    var ctrl = this\r\n    ctrl.datasource.getEventFrameTemplates(ctrl.annotation.database.WebId).then(templates => {\r\n      ctrl.templates = templates\r\n    })\r\n  }\r\n}\r\n\r\nPiWebApiAnnotationsQueryCtrl.templateUrl = 'partials/annotations.editor.html'\r\n"]}